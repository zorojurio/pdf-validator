
{% extends 'base.html' %}
{% load static %}
{% block title %}Verified Outcomes{% endblock %}

{% block content %}
    <div class="container">
        <div class="row mt-5">
            <div class="col-9">
                {% if pdf_restult %}
                    <div class="card">
                        <div class="card-body">
                            <h2 class="text-info mb-5 text-center underline-text">PDF Validation Report. </h2>
                            <div>
                                The PDF is
                                {% if pdf_restult.is_signed %}
                                    <span class="text-success ">digitally signed. <i
                                            class="fas fa-check-circle green-circle"></i> </span>
                                {% else %}
                                    <span class="text-danger">digitally not signed.
                                    <i class="fas fa-times-circle red-circle"></i>
                                    </span>
                                {% endif %}
                            </div>
                            <div>

                                All signatures are
                                {% if pdf_restult.is_signatures_valid %}
                                    <span class="text-success"> Valid.
                                        <i class="fas fa-check-circle green-circle"></i> </span>
                                {% else %}
                                    <span class="text-danger"> Not Signed.
                                        <i class="fas fa-times-circle red-circle"></i>
                                    </span>
                                {% endif %}
                            </div>
                            <div>

                                Hashes are
                                {% if pdf_restult.is_hashes_valid %}
                                    <span class="text-success"> Valid. <i
                                            class="fas fa-check-circle green-circle"></i></span>
                                {% else %}
                                    <span class="text-danger"> not valid, The document has been modified.
                                        <i class="fas fa-times-circle red-circle"></i>
                                    </span>
                                {% endif %}
                            </div>
                            <p> This PDF was signed {{ pdf_restult.signaturevalidator_set.count }}
                                Times.</p>
                            <div class="mb-5 mt-5">
                                {% if pdf_restult.updated %}
                                    Date of Validation:
                                    <span class="text-secondary"> {{ pdf_restult.updated }}</span>
                                {% endif %}
                            </div>
                            <h3 class="text-secondary text-center mb-4 underline-text">Signature Details.</h3>

                            <div class="row">
                                <div class="col-8">
                                        {% for signaturevalidator in pdfdocumentvalidator.signaturevalidator_set.all %}
                                            <h5 class="text-secondary">{{ signaturevalidator.signature_name }}</h5>

                                                    <ul class="mt-2">
                                                        <li><span class="font-weight-bold">Hash is :</span>
                                                            {% if signaturevalidator.hash_valid %}
                                                                <span class="text-success"> valid.
                                                                        <i class="fas fa-check-circle green-circle"></i>
                                                                    </span>
                                                            {% else %}
                                                                <span class="text-danger"> invalid.
                                                                    <i class="fas fa-times-circle red-circle"></i>
                                                                </span>
                                                            {% endif %}
                                                        </li>
                                                        <li><span class="font-weight-bold">Signature Valid:</span>
                                                            <span class="text"></span>
                                                            {% if signaturevalidator.signature_valid %}
                                                                <span class="text-success"> valid.
                                                                        <i class="fas fa-check-circle green-circle"></i>
                                                                    </span>
                                                            {% else %}
                                                                <span class="text-danger"> invalid.
                                                                    <i class="fas fa-times-circle red-circle"></i>
                                                                </span>
                                                            {% endif %}
                                                        </li>
                                                        <li><span class="font-weight-bold">Verified Signer:</span>
                                                            {%if signaturevalidator.verified_signer %}
                                                                <span class="text-success"> Signer is verified in the system
                                                                    <i class="fas fa-check-circle green-circle"></i>
                                                                </span>
                                                            {% else %}
                                                                <span class="text-danger"> Signer is not verified in the system
                                                                    <i class="fas fa-times-circle red-circle"></i>
                                                                </span>
                                                            {% endif %}
                                                        </li>
                                                        {% if signaturevalidator.message %}
                                                        	<li>
                                                                <span class="font-weight-bold">Message:</span>
                                                            <span class="text-secondary">{{ signaturevalidator.message }}</span>
                                                        {% endif %}
                                                        <li><span class="font-weight-bold">Signed by:</span> {{ signaturevalidator.signed_by }}
                                                        </li>
                                                        <li><span class="font-weight-bold">Signer's Email:</span> {{ signaturevalidator.email_of_signer }}
                                                        </li>
                                                        <li><span class="font-weight-bold">Signature placed at:</span> {{ signaturevalidator.signing_time }}
                                                        </li>
                                                    </ul>


                                        {% endfor %}
                                </div>
                            </div>

                        </div>

                    </div>
                {% endif %}
            </div>
            <div class="col-3">
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-danger mb-5 text-center">Actions</h3>
                        <img class="center-image" src="{% static 'img/pdf-download-2617.svg' %}"
                             height="100px" alt="download pdf">
                        <div class="text-center mt-3">
                            <a href="{{ pdf_restult.pdf_file.url }}"

                           target="_blank"
                               class="btn btn-outline-danger border-radius-one">Download PDF</a>
                        </div>

                        <img class="center-image mt-5" src="{% static 'img/pdf-validation.png' %}"
                             height="100px" alt="download pdf">
                        <div class="text-center mt-3">
                            <a href="{% url 'signature-validator-view:validate-signature' %}"
                               class="btn btn-outline-success border-radius-one">Validate another
                                PDF</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

